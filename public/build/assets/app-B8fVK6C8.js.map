{"version":3,"mappings":"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","names":["axiosInstance","CartRenderer","isLoading","miniCartToggle","mainCartContainer","items","cartTotals","cartItemsContainer","cartEmptyMessage","cartSummary","cartTotalPriceElement","cartSubtotalPriceElement","cartDiscountPriceElement","cartShippingPriceElement","cartTaxPriceElement","item","index","itemElement","imageUrl","productName","totalQuantity","totalPrice","miniCartItemsContainer","miniCartTotalQuantitySpan","miniCartTotalPriceSpan","miniCartEmptyMessage","miniCartSummary","Alpine","jalaali","message","type","duration","existingMessageBox","messageBox","title","onConfirm","onCancel","modalOverlay","modalTitle","modalMessage","confirmBtn","cancelBtn","handleConfirm","handleCancel","username","action","details","generateUUID","c","r","setCookie","name","value","days","expires","date","initializeGuestUUID","guestUUID","setupProductEditListeners","currentGalleryImagesContainer","event","button","imageId","imageContainer","hiddenInput","path","n","module","err","__vitePreload","logoutUser"],"ignoreList":[],"sources":["../../../resources/js/vendor/bootstrap.js","../../../resources/js/core/renderer.js","../../../resources/js/core/app.js"],"sourcesContent":["// resources/js/vendor/bootstrap.js\n\n// تغییر: مسیر ایمپورت کردن axiosInstance به فولدر core اصلاح شد.\nimport axiosInstance from '../core/axiosInstance.js';\n\n// Axios را به صورت سراسری در دسترس قرار دهید و از axiosInstance استفاده کنید\nwindow.axios = axiosInstance; // تغییر کلیدی: اختصاص axiosInstance به window.axios\n\n// تنظیم هدر پیش‌فرض برای درخواست‌های AJAX\n// این خط ممکن است اضافی باشد اگر در axiosInstance.js تنظیم شده باشد، اما برای اطمینان نگه داشته می‌شود.\nwindow.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\n// --- تنظیمات Axios برای JWT ---\n// این بخش اکنون توسط axiosInstance.js و api.js مدیریت می‌شود و دیگر نیازی به آن در اینجا نیست.\n// axiosInstance.js خودش JWT را از localStorage می‌خواند و تنظیم می‌کند.\n// بنابراین، بخش زیر را حذف می‌کنیم یا به عنوان کامنت نگه می‌داریم.\n/*\nconst initialToken = localStorage.getItem('jwt_token');\nif (initialToken) {\n    window.axios.defaults.headers.common['Authorization'] = `Bearer ${initialToken}`;\n    console.log('Axios initialized with existing JWT token from localStorage.');\n} else {\n    console.log('No existing JWT token found in localStorage for Axios initialization.');\n}\n*/\n\n// NEW: اضافه کردن guest_uuid به عنوان هدر پیش‌فرض برای تمام درخواست‌های Axios\n// این بخش نیز توسط api.js (که از axiosInstance استفاده می‌کند) مدیریت می‌شود.\n// بنابراین، بخش زیر را نیز حذف می‌کنیم یا به عنوان کامنت نگه می‌داریم.\n/*\nif (typeof window.guest_uuid !== 'undefined' && window.guest_uuid !== null) {\n    window.axios.defaults.headers.common['X-Guest-UUID'] = window.guest_uuid;\n    console.log('Axios initialized with X-Guest-UUID header:', window.guest_uuid);\n} else {\n    console.warn('window.guest_uuid is not defined when initializing Axios. Guest cart functionality might be affected.');\n    // Fallback: Try to get it again if it's not set yet (though it should be by app.js)\n    if (localStorage.getItem('guest_uuid')) {\n        window.axios.defaults.headers.common['X-Guest-UUID'] = localStorage.getItem('guest_uuid');\n        console.log('Axios initialized with X-Guest-UUID from localStorage fallback:', localStorage.getItem('guest_uuid'));\n    }\n}\n*/\n\n// نکته: بخش مربوط به CSRF کوکی Sanctum از اینجا حذف شد،\n// زیرا با استفاده از JWT برای احراز هویت API، نیازی به آن نیست.\n// اگر بخش‌های سنتی وب‌سایت شما هنوز به CSRF نیاز دارند،\n// باید مطمئن شوید که لاراول به طور خودکار توکن را در فرم‌ها یا تگ‌های meta قرار می‌دهد.\n","// resources/js/renderer.js\nconsole.log('renderer.js loaded and starting...');\n\n// این فایل مسئول به‌روزرسانی رابط کاربری (DOM) بر اساس داده‌های سبد خرید است.\n\n// تعریف یک شیء واحد برای نگهداری توابع رندرینگ\nexport const CartRenderer = {\n    /**\n     * وضعیت لودینگ سبد خرید را تنظیم می‌کند (مثلاً نمایش اسپینر).\n     * @param {boolean} isLoading - اگر true باشد، اسپینر نمایش داده می‌شود.\n     */\n    setCartLoadingState: function(isLoading) {\n        const miniCartToggle = document.getElementById('mini-cart-toggle');\n        const mainCartContainer = document.getElementById('cart-page-container'); // فرض می‌کنیم یک کانتینر اصلی برای صفحه سبد خرید دارید\n\n        if (miniCartToggle) {\n            if (isLoading) {\n                miniCartToggle.classList.add('opacity-50', 'pointer-events-none'); // کم‌رنگ کردن و غیرفعال کردن کلیک\n                // می‌توانید یک اسپینر کوچک در اینجا اضافه کنید\n            } else {\n                miniCartToggle.classList.remove('opacity-50', 'pointer-events-none');\n                // اسپینر را حذف کنید\n            }\n        }\n\n        if (mainCartContainer) {\n            if (isLoading) {\n                mainCartContainer.classList.add('opacity-50', 'pointer-events-none');\n                // می‌توانید یک اورلی با اسپینر بزرگتر روی کل صفحه سبد خرید اضافه کنید\n            } else {\n                mainCartContainer.classList.remove('opacity-50', 'pointer-events-none');\n            }\n        }\n        console.log('Cart loading state set to:', isLoading);\n    },\n\n    /**\n     * رندر کردن جزئیات سبد خرید اصلی (صفحه /cart).\n     * @param {Array<Object>} items - آرایه‌ای از آیتم‌های سبد خرید.\n     * @param {Object} cartTotals - شیء شامل مجموع‌های سبد خرید (subtotal, total, etc.).\n     */\n    renderMainCart: function(items, cartTotals) {\n        // --- لاگ‌های دیباگ عمیق ---\n        console.log('renderMainCart: Function called.');\n        console.log('renderMainCart: Received items:', items);\n        console.log('renderMainCart: Received cartTotals:', cartTotals);\n        console.log('renderMainCart: Is items array an array?', Array.isArray(items));\n        console.log('renderMainCart: Items array length:', items ? items.length : 'N/A');\n        // --- پایان لاگ‌های دیباگ عمیق ---\n\n        const cartItemsContainer = document.getElementById('cart-items-container');\n        const cartEmptyMessage = document.getElementById('cart-empty-message');\n        const cartSummary = document.getElementById('cart-summary');\n        // عناصر خلاصه سبد خرید - ID ها با index.blade.php مطابقت داده شده‌اند.\n        const cartTotalPriceElement = document.getElementById('cart-total-price');\n        const cartSubtotalPriceElement = document.getElementById('cart-subtotal-price'); \n        const cartDiscountPriceElement = document.getElementById('cart-discount-price'); \n        const cartShippingPriceElement = document.getElementById('cart-shipping-price'); \n        const cartTaxPriceElement = document.getElementById('cart-tax-price'); \n\n        if (!cartItemsContainer || !cartEmptyMessage || !cartSummary || !cartTotalPriceElement || !cartSubtotalPriceElement || !cartDiscountPriceElement || !cartShippingPriceElement || !cartTaxPriceElement) {\n            console.warn('One or more main cart DOM elements not found. Skipping main cart rendering.');\n            console.warn('Missing elements:', {\n                cartItemsContainer: !!cartItemsContainer,\n                cartEmptyMessage: !!cartEmptyMessage,\n                cartSummary: !!cartSummary,\n                cartTotalPriceElement: !!cartTotalPriceElement,\n                cartSubtotalPriceElement: !!cartSubtotalPriceElement,\n                cartDiscountPriceElement: !!cartDiscountPriceElement,\n                cartShippingPriceElement: !!cartShippingPriceElement,\n                cartTaxPriceElement: !!cartTaxPriceElement\n            });\n            return;\n        }\n\n        cartItemsContainer.innerHTML = ''; // پاک کردن آیتم‌های قبلی\n\n        // --- لاگ دیباگ برای شرط خالی بودن ---\n        if (!Array.isArray(items) || items.length === 0) {\n            console.log('renderMainCart: Condition for empty cart met. Displaying empty message.');\n            cartEmptyMessage.classList.remove('hidden');\n            cartItemsContainer.classList.add('hidden');\n            cartSummary.classList.add('hidden');\n            // همچنین مجموع‌ها را صفر کنید\n            cartSubtotalPriceElement.textContent = '0 تومان';\n            cartDiscountPriceElement.textContent = '0 تومان';\n            cartShippingPriceElement.textContent = '0 تومان';\n            cartTaxPriceElement.textContent = '0 تومان';\n            cartTotalPriceElement.textContent = '0 تومان';\n            return;\n        }\n        // --- پایان لاگ دیباگ برای شرط خالی بودن ---\n\n        console.log('renderMainCart: Cart is NOT empty. Proceeding to render items.'); // DEBUG: Add this line\n        cartEmptyMessage.classList.add('hidden');\n        cartItemsContainer.classList.remove('hidden');\n        cartSummary.classList.remove('hidden');\n\n        items.forEach((item, index) => { // اضافه کردن index برای دیباگ\n            console.log(`renderMainCart: Processing item ${index + 1}:`, item); // DEBUG: Add this line\n            const itemElement = document.createElement('div');\n            itemElement.classList.add('flex', 'items-center', 'justify-between', 'py-4', 'border-b', 'border-gray-200', 'last:border-b-0');\n            itemElement.setAttribute('data-cart-item-id', item.id);\n            // اطمینان از اینکه item.unitPrice یک عدد معتبر است\n            itemElement.setAttribute('data-unit-price', item.unitPrice && !isNaN(item.unitPrice) ? item.unitPrice : 0); // استفاده از unitPrice\n\n            // اصلاح شده: اطمینان از وجود item.product و item.product.image\n            const imageUrl = (item.product && item.product.image) ? item.product.image : `https://placehold.co/100x100/E5E7EB/4B5563?text=No+Image`;\n            const productName = item.product.name || 'نامشخص'; // استفاده از name به جای title\n\n            itemElement.innerHTML = `\n                <div class=\"flex items-center flex-grow\">\n                    <img src=\"${imageUrl}\" \n                         onerror=\"this.onerror=null;this.src='https://placehold.co/100x100/E5E7EB/4B5563?text=No+Image';\"\n                         alt=\"${productName}\" \n                         class=\"w-20 h-20 rounded-lg object-cover ml-4 shadow-sm\">\n                    <div class=\"flex-grow\">\n                        <h3 class=\"text-lg font-semibold text-gray-800\">${productName}</h3>\n                        ${item.product_variant ? `<p class=\"text-sm text-gray-500\">نوع: ${item.product_variant.name}</p>` : ''}\n                        <p class=\"text-green-700 font-bold mt-1\">${new Intl.NumberFormat('fa-IR').format(item.unitPrice)} تومان</p>\n                    </div>\n                </div>\n                <div class=\"flex items-center\">\n                    <div class=\"flex items-center border border-gray-300 rounded-md overflow-hidden ml-4\">\n                        <button class=\"quantity-btn p-2 bg-gray-100 hover:bg-gray-200\" data-action=\"decrease\" data-cart-item-id=\"${item.id}\">\n                            <i class=\"fas fa-minus text-gray-600\"></i>\n                        </button>\n                        <!-- تغییر از span به input برای قابلیت ویرایش و خواندن مقدار -->\n                        <input type=\"text\" value=\"${item.quantity}\" class=\"w-12 text-center border-x border-gray-300 py-2 focus:outline-none bg-white dark:bg-gray-700 dark:text-white item-quantity\" readonly>\n                        <button class=\"quantity-btn p-2 bg-gray-100 hover:bg-gray-200\" data-action=\"increase\" data-cart-item-id=\"${item.id}\">\n                            <i class=\"fas fa-plus text-gray-600\"></i>\n                        </button>\n                    </div>\n                    <p class=\"text-gray-800 font-semibold ml-4 item-subtotal\" data-subtotal=\"${item.totalPrice}\">${new Intl.NumberFormat('fa-IR').format(item.totalPrice)} تومان</p>\n                    <button class=\"remove-item-btn p-2 text-red-500 hover:text-red-700 transition-colors duration-200\" data-cart-item-id=\"${item.id}\">\n                        <i class=\"fas fa-times\"></i>\n                    </button>\n                </div>\n            `;\n            cartItemsContainer.appendChild(itemElement);\n            console.log(`renderMainCart: Appended item ${item.id} to cartItemsContainer.`); // DEBUG: Add this line\n        });\n\n        // Update totals\n        cartSubtotalPriceElement.textContent = new Intl.NumberFormat('fa-IR').format(cartTotals.subtotal ?? 0) + ' تومان';\n        cartDiscountPriceElement.textContent = new Intl.NumberFormat('fa-IR').format(cartTotals.discount ?? 0) + ' تومان';\n        cartShippingPriceElement.textContent = new Intl.NumberFormat('fa-IR').format(cartTotals.shipping ?? 0) + ' تومان';\n        cartTaxPriceElement.textContent = new Intl.NumberFormat('fa-IR').format(cartTotals.tax ?? 0) + ' تومان';\n        // اصلاح شده: استفاده از cartTotals.totalPrice به جای cartTotals.total\n        cartTotalPriceElement.textContent = new Intl.NumberFormat('fa-IR').format(cartTotals.totalPrice ?? 0) + ' تومان';\n        console.log('Main cart totals updated. Total price:', cartTotalPriceElement.textContent); // DEBUG LOG\n\n        console.log('Main cart rendered successfully.');\n    },\n\n    /**\n     * رندر کردن جزئیات مینی سبد خرید (در هدر).\n     * @param {Array<Object>} items - آرایه‌ای از آیتم‌های سبد خرید.\n     * @param {number} totalQuantity - تعداد کل محصولات در سبد خرید.\n     * @param {float} totalPrice - قیمت کل محصولات در سبد خرید.\n     */\n    renderMiniCartDetails: function(items, totalQuantity, totalPrice) {\n        console.log('renderMiniCartDetails called with items:', items, 'totalQuantity:', totalQuantity, 'totalPrice:', totalPrice);\n\n        const miniCartItemsContainer = document.getElementById('mini-cart-items-container');\n        const miniCartTotalQuantitySpan = document.getElementById('mini-cart-total-quantity');\n        const miniCartTotalPriceSpan = document.getElementById('mini-cart-total-price');\n        const miniCartEmptyMessage = document.getElementById('mini-cart-empty-message');\n        const miniCartSummary = document.getElementById('mini-cart-summary');\n\n        if (!miniCartItemsContainer || !miniCartTotalQuantitySpan || !miniCartTotalPriceSpan || !miniCartEmptyMessage || !miniCartSummary) {\n            console.warn('One or more mini cart DOM elements not found. Skipping mini cart rendering.');\n            return;\n        }\n\n        miniCartItemsContainer.innerHTML = ''; // پاک کردن آیتم‌های قبلی\n\n        if (!Array.isArray(items) || items.length === 0) {\n            miniCartEmptyMessage.classList.remove('hidden');\n            miniCartItemsContainer.classList.add('hidden');\n            miniCartSummary.classList.add('hidden');\n            miniCartTotalQuantitySpan.classList.add('hidden');\n            miniCartTotalQuantitySpan.textContent = '0';\n            miniCartTotalPriceSpan.textContent = '0 تومان';\n            console.log('Mini cart is empty. Displaying empty message.');\n            return;\n        }\n\n        miniCartEmptyMessage.classList.add('hidden');\n        miniCartItemsContainer.classList.remove('hidden');\n        miniCartSummary.classList.remove('hidden');\n        miniCartTotalQuantitySpan.classList.remove('hidden');\n\n        items.forEach(item => {\n            const itemElement = document.createElement('div');\n            itemElement.classList.add('flex', 'items-center', 'py-2', 'border-b', 'border-gray-100', 'last:border-b-0');\n            itemElement.setAttribute('data-cart-item-id', item.id);\n\n            // اصلاح شده: اطمینان از وجود item.product و item.product.image\n            const imageUrl = (item.product && item.product.image) ? item.product.image : `https://placehold.co/50x50/E5E7EB/4B5563?text=No+Image`;\n            const productName = item.product.name || 'نامشخص'; // استفاده از name به جای title\n\n            itemElement.innerHTML = `\n                <img src=\"${imageUrl}\" \n                     onerror=\"this.onerror=null;this.src='https://placehold.co/50x50/E5E7EB/4B5563?text=No+Image';\"\n                     alt=\"${productName}\" \n                     class=\"w-12 h-12 rounded-md object-cover ml-3\">\n                <div class=\"flex-grow\">\n                    <p class=\"text-sm font-medium text-gray-800\">${productName}</p>\n                    ${item.product_variant ? `<p class=\"text-xs text-gray-500\">نوع: ${item.product_variant.name}</p>` : ''}\n                    <!-- تغییر در اینجا: \"تعداد:\" را از داخل span خارج کردیم -->\n                    <p class=\"text-xs text-gray-600\">تعداد: <span class=\"mini-cart-item-quantity\" data-quantity=\"${item.quantity}\">${item.quantity}</span></p>\n                </div>\n                <p class=\"text-sm font-bold text-green-700 mini-cart-item-subtotal\" data-subtotal=\"${item.totalPrice}\">${new Intl.NumberFormat('fa-IR').format(item.totalPrice)} تومان</p>\n            `;\n            miniCartItemsContainer.appendChild(itemElement);\n        });\n\n        miniCartTotalQuantitySpan.textContent = totalQuantity;\n        miniCartTotalPriceSpan.textContent = new Intl.NumberFormat('fa-IR').format(totalPrice) + ' تومان';\n\n        console.log('Mini cart rendered successfully.');\n    }\n};\n\n// برای اهداف دیباگینگ: CartRenderer را به صورت سراسری در دسترس قرار دهید\nif (typeof window !== 'undefined') {\n    window.CartRenderer = CartRenderer;\n    console.log('CartRenderer exposed globally for debugging.');\n}\n","// resources/js/core/app.js\nconsole.log('app.js loaded and starting...');\n\nimport '../vendor/bootstrap'; // Correct path for bootstrap.js in vendor folder\nimport Alpine from 'alpinejs';\n\nwindow.Alpine = Alpine;\nAlpine.start();\n\n// --- Import general and base files (always necessary) ---\n// These files should be in the 'core' folder or their path should be set correctly.\nimport * as jalaali from 'jalaali-js';\nwindow.jalaali = jalaali;\n\n// NEW: Import the analytics module\nimport './analytics.js'; // Import analytics.js from the same core folder\n\n// API functions - these are usually needed on all pages and are in the core folder\nimport {\n    fetchCartContents,\n    addToCart,\n    updateCartItemQuantity,\n    removeCartItem,\n    clearCart,\n    applyCoupon,\n    removeCoupon,\n    getJwtToken,\n    logoutUser // این تابع برای استفاده در navbar_new.js و AppDebugger اکسپوز شده است\n} from './api.js'; // api.js is in the same core folder\n\n// `events.js`, `renderer.js`, `axiosInstance.js` files are in `core` and are always necessary:\nimport './events.js';\nimport './renderer.js';\nimport './axiosInstance.js'; // axiosInstance.js is in the same core folder\n\n// --- Global Data and Functions ---\nwindow.adminActivityLog = [\n    { timestamp: new Date(), username: 'سیستم', action: 'راه‌اندازی پنل', details: 'سیستم آماده کار است.' }\n];\nwindow.currentUser = { id: 1, username: 'admin', role: 'مدیر', lastLocation: '192.168.1.100' };\n\n/**\n * Displays a temporary message box (toast notification) on the screen.\n * تابع سراسری برای نمایش پیام‌ها (مثل پیام‌های موفقیت، خطا یا اطلاعاتی).\n * @param {string} message - The message to display.\n * @param {string} [type='info'] - The type of message ('success', 'error', 'info'). Affects background color.\n * @param {number} [duration=3000] - The duration (in milliseconds) for which the message is displayed.\n */\nwindow.showMessage = function(message, type = 'info', duration = 3000) {\n    const existingMessageBox = document.querySelector('.message-box');\n    if (existingMessageBox) {\n        existingMessageBox.remove();\n    }\n\n    const messageBox = document.createElement('div');\n    messageBox.className = `fixed bottom-5 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg text-white z-50 transition-all duration-300 ease-out message-box`;\n\n    if (type === 'success') {\n        messageBox.classList.add('bg-green-600');\n    } else if (type === 'error') {\n        messageBox.classList.add('bg-red-600');\n    } else {\n        messageBox.classList.add('bg-gray-800');\n    }\n\n    messageBox.textContent = message;\n    document.body.appendChild(messageBox);\n\n    setTimeout(() => {\n        messageBox.classList.add('opacity-0', 'translate-y-full');\n        messageBox.addEventListener('transitionend', () => messageBox.remove());\n    }, duration);\n};\n\n/**\n * Displays a custom confirmation modal.\n * تابع سراسری برای نمایش مدال تأیید سفارشی.\n * @param {string} title - Title of the confirmation.\n * @param {string} message - Message of the confirmation.\n * @param {function} onConfirm - Callback function to execute on confirmation.\n * @param {function} [onCancel] - Optional callback function to execute on cancellation.\n */\nwindow.showConfirmationModal = function(title, message, onConfirm, onCancel) {\n    const modalOverlay = document.getElementById('confirm-modal-overlay');\n    // Check for modalOverlay existence\n    if (!modalOverlay) {\n        console.error(\"Confirmation modal overlay not found. Ensure 'confirm-modal-overlay' element exists in your layout.\");\n        return;\n    }\n\n    const modalTitle = modalOverlay.querySelector('h3');\n    const modalMessage = modalOverlay.querySelector('p#confirm-message');\n    let confirmBtn = modalOverlay.querySelector('#confirm-yes');\n    let cancelBtn = modalOverlay.querySelector('#confirm-no');\n\n    // Reset event listeners to prevent multiple bindings\n    confirmBtn.replaceWith(confirmBtn.cloneNode(true));\n    cancelBtn.replaceWith(cancelBtn.cloneNode(true));\n    confirmBtn = modalOverlay.querySelector('#confirm-yes'); // New reference to cloned buttons\n    cancelBtn = modalOverlay.querySelector('#confirm-no');\n\n    modalTitle.textContent = title;\n    modalMessage.textContent = message;\n    modalOverlay.classList.remove('hidden');\n    modalOverlay.classList.add('active'); // Activate for transition\n\n    const handleConfirm = () => {\n        onConfirm();\n        modalOverlay.classList.add('hidden');\n        modalOverlay.classList.remove('active');\n    };\n\n    const handleCancel = () => {\n        if (onCancel) onCancel();\n        modalOverlay.classList.add('hidden');\n        modalOverlay.classList.remove('active');\n    };\n\n    confirmBtn.addEventListener('click', handleConfirm);\n    cancelBtn.addEventListener('click', handleCancel);\n};\n\n/**\n * Logs an admin action to the activity log.\n * این تابع به صورت سراسری در دسترس خواهد بود.\n * @param {string} username - The username of the admin performing the action.\n * @param {string} action - The action performed (e.g., 'ویرایش کاربر').\n * @param {string} details - Additional details about the action.\n */\nwindow.logAdminAction = function(username, action, details) {\n    window.adminActivityLog.push({\n        timestamp: new Date(),\n        username: username,\n        action: action,\n        details: details\n    });\n};\n\n/**\n * Generates a UUID (Universally Unique Identifier) v4.\n * تولید یک UUID نسخه 4.\n * @returns {string} A UUID string.\n */\nfunction generateUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        const r = Math.random() * 16 | 0,\n            v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\n/**\n * Sets a cookie with the given name, value, and expiry.\n * یک کوکی با نام، مقدار و تاریخ انقضای مشخص تنظیم می‌کند.\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {number} days - Number of days the cookie is valid.\n */\nfunction setCookie(name, value, days) {\n    let expires = \"\";\n    if (days) {\n        const date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\n}\n\n/**\n * Initializes or retrieves the guest_uuid from localStorage and sets it as a cookie.\n * مقداردهی اولیه یا بازیابی guest_uuid از localStorage و تنظیم آن به عنوان کوکی.\n * @returns {string} The guest UUID.\n */\nfunction initializeGuestUUID() {\n    let guestUUID = localStorage.getItem('guest_uuid');\n    if (!guestUUID) {\n        guestUUID = generateUUID();\n        localStorage.setItem('guest_uuid', guestUUID);\n        console.log('New guest_uuid generated and stored:', guestUUID);\n    } else {\n        console.log('Existing guest_uuid retrieved:', guestUUID);\n    }\n    // Always set/refresh the cookie to ensure it's sent with every request\n    setCookie('guest_uuid', guestUUID, 365); // Set for 1 year\n    return guestUUID;\n}\n\n/**\n * Sets up event listeners specific to the product edit page.\n * این تابع برای مدیریت حذف تصاویر گالری در صفحه ویرایش محصول استفاده می‌شود.\n * این تابع به صورت داینامیک لود خواهد شد اگر در صفحه ویرایش محصول باشیم.\n */\nfunction setupProductEditListeners() {\n    const currentGalleryImagesContainer = document.getElementById('current-gallery-images');\n\n    if (currentGalleryImagesContainer) {\n        console.log('Product edit page detected. Setting up gallery image listeners.');\n        currentGalleryImagesContainer.addEventListener('click', function(event) {\n            if (event.target.closest('.remove-gallery-image-btn')) {\n                const button = event.target.closest('.remove-gallery-image-btn');\n                const imageId = button.dataset.imageId;\n                const imageContainer = button.closest('.relative.group'); // The parent div for the image\n\n                window.showConfirmationModal(\n                    'حذف تصویر',\n                    'آیا مطمئن هستید که می‌خواهید این تصویر را حذف کنید؟',\n                    () => {\n                        // Logic to execute if user confirms\n                        const hiddenInput = imageContainer.querySelector('.remove-image-input');\n                        if (hiddenInput) {\n                            hiddenInput.value = imageId; // Set the ID to be removed\n                            // Hide the image visually\n                            imageContainer.style.display = 'none';\n                            window.showMessage('تصویر برای حذف علامت‌گذاری شد.', 'success');\n                        }\n                    },\n                    () => {\n                        // Optional: Logic to execute if user cancels\n                        window.showMessage('عملیات حذف تصویر لغو شد.', 'info');\n                    }\n                );\n            }\n        });\n    }\n}\n\n// IMPORTANT: Initialize guest UUID immediately when the script is parsed,\n// NOT inside DOMContentLoaded, to ensure it's available for other modules (like api.js)\nwindow.guest_uuid = initializeGuestUUID();\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const path = window.location.pathname;\n\n    // --- Dynamic Imports based on page path ---\n\n    // Authentication module (auth) and JWT Manager\n    if (path.includes('/login') || path.includes('/register') || path.includes('/profile') || path.includes('/dashboard') || path.includes('/mobile-login') || path.includes('/verify-otp-form')) {\n        import('../auth/auth.js')\n            .then(module => {\n                if (module.initAuth) {\n                    module.initAuth();\n                }\n                console.log('Auth module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load auth module:', err));\n\n        import('../auth/jwt_manager.js')\n            .then(() => {\n                console.log('JWT Manager module loaded.');\n            })\n            .catch(err => console.error('Failed to load JWT Manager module:', err));\n    }\n\n    // Cart module (cart) - REMOVED: React now handles cart functionality\n    // If you still need the old cart.js for the main /cart page,\n    // you should load it conditionally ONLY on that page, not globally.\n    // if (path.includes('/cart')) { // Example: Only load on /cart page\n    //     import('../cart/cart.js')\n    //         .then(module => {\n    //             if (module.initCart) {\n    //                 module.initCart();\n    //             } else {\n    //                 console.warn('Cart module loaded but initCart function not found.');\n    //             }\n    //             console.log('Cart module loaded and initialized.');\n    //         })\n    //         .catch(err => console.error('Failed to load cart module:', err));\n    // }\n\n\n    // Search module (search)\n    if (path.includes('/search') || path.includes('/products')) {\n        import('../ui/search.js') // Corrected path to ui/search.js\n            .then(module => {\n                if (module.initSearch) {\n                    module.initSearch();\n                } else {\n                    console.warn('Search module loaded but initSearch function not found.');\n                }\n                console.log('Search module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load search module:', err));\n    }\n\n    // Navbar module (navbar_new)\n    if (document.querySelector('#main-navbar') || document.querySelector('.main-nav')) {\n        import('../ui/navbar_new.js')\n            .then(module => {\n                if (module.initializeNavbarAndCart) {\n                    module.initializeNavbarAndCart();\n                } else {\n                    console.warn('Navbar module loaded but initializeNavbarAndCart function not found.');\n                }\n                console.log('Navbar module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load navbar module:', err));\n    }\n\n    // Admin panel module (admin)\n    if (path.startsWith('/admin/')) {\n        import('../admin/admin.js')\n            .then(module => {\n                if (module.initAdminPanel) {\n                    module.initAdminPanel();\n                } else {\n                    console.warn('Admin module loaded but initAdminPanel function not found.');\n                }\n                console.log('Admin module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load admin module:', err));\n    }\n\n    // Charts module (charts)\n    if (path.includes('/dashboard') || path.includes('/admin-reports') || path.includes('/analytics')) {\n        import('../admin/charts.js')\n            .then(module => {\n                if (module.initCharts) {\n                    module.initCharts();\n                } else {\n                    console.warn('Charts module loaded but initCharts function not found.');\n                }\n                console.log('Charts module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load charts module:', err));\n    }\n\n    // Checkout module (checkout)\n    if (path.includes('/checkout')) {\n        import('../checkout/checkout.js')\n            .then(module => {\n                if (module.initCheckout) {\n                    module.initCheckout();\n                } else {\n                    console.warn('Checkout module loaded but initCheckout function not found.');\n                }\n                console.log('Checkout module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load checkout module:', err));\n    }\n\n    // Hero module (hero)\n    if (path === '/' || path.includes('/home')) {\n        import('../ui/hero.js')\n            .then(module => {\n                if (module.initHeroCarousel) {\n                    module.initHeroCarousel();\n                } else {\n                    console.warn('Hero module loaded but initHeroCarousel function not found.');\n                }\n                console.log('Hero module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load hero module:', err));\n    }\n\n    // Export module (export.js)\n    if (document.getElementById('export-excel') || document.getElementById('export-pdf')) {\n        import('../cart/export.js')\n            .then(module => {\n                if (module.setupExportButtons) {\n                    module.setupExportButtons();\n                } else {\n                    console.warn('Export module loaded but setupExportButtons function not found.');\n                }\n                console.log('Export module loaded and initialized.');\n            })\n            .catch(err => console.error('Failed to load export module:', err));\n    }\n\n    // Calling setupProductEditListeners (if on product edit page)\n    if (path.includes('/products/edit') || path.includes('/products/create')) {\n        setupProductEditListeners();\n        console.log('Product edit listeners setup.');\n    }\n});\n\n// --- For debugging purposes: make functions globally accessible ---\nwindow.logoutUser = logoutUser;\n"],"file":"assets/app-B8fVK6C8.js"}