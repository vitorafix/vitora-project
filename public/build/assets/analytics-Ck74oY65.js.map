{"version":3,"file":"analytics-Ck74oY65.js","sources":["../../../resources/js/core/analytics.js"],"sourcesContent":["// resources/js/analytics.js\r\n\r\n// تابع کمکی برای تولید UUID\r\nfunction generateUUID() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\n// تابع کمکی برای نمایش پیام (این تابع برای مثال UI است، در پروژه واقعی ممکن است متفاوت باشد)\r\nfunction showMessage(msg, type) {\r\n    const messageDiv = document.getElementById('message');\r\n    if (messageDiv) {\r\n        messageDiv.textContent = msg;\r\n        messageDiv.className = `message ${type}`;\r\n        messageDiv.classList.remove('hidden');\r\n    }\r\n}\r\n\r\n// --- مدیریت Guest UUID ---\r\nlet guestUuid = localStorage.getItem('guest_uuid');\r\nif (!guestUuid) {\r\n    guestUuid = generateUUID();\r\n    localStorage.setItem('guest_uuid', guestUuid);\r\n}\r\nconst guestUuidDisplay = document.getElementById('guestUuidDisplay');\r\nif (guestUuidDisplay) {\r\n    guestUuidDisplay.textContent = guestUuid;\r\n}\r\n\r\n// --- ردیابی تحلیلی ---\r\nlet pageViews = parseInt(localStorage.getItem('page_views') || '0');\r\nlet screenTime = parseInt(localStorage.getItem('screen_time') || '0');\r\nlet sessionTime = parseInt(localStorage.getItem('session_time') || '0');\r\nlet clickCount = parseInt(localStorage.getItem('click_count') || '0');\r\nlet jsErrorCount = parseInt(localStorage.getItem('js_error_count') || '0');\r\nlet trafficSource = localStorage.getItem('traffic_source') || document.referrer || 'direct';\r\nlet maxScrollDepth = 0; // In percentage\r\n\r\n// به‌روزرسانی نمایشگرها در UI (برای مثال)\r\nfunction updateAnalyticsDisplays() {\r\n    const displays = {\r\n        pageViewsDisplay: pageViews,\r\n        screenTimeDisplay: screenTime,\r\n        sessionTimeDisplay: sessionTime,\r\n        clickCountDisplay: clickCount,\r\n        trafficSourceDisplay: trafficSource,\r\n        jsErrorsDisplay: jsErrorCount,\r\n        scrollDepthDisplay: `${maxScrollDepth}%`\r\n    };\r\n    for (const id in displays) {\r\n        const element = document.getElementById(id);\r\n        if (element) {\r\n            element.textContent = displays[id];\r\n        }\r\n    }\r\n}\r\nupdateAnalyticsDisplays();\r\n\r\n\r\n// افزایش بازدید صفحه هنگام بارگذاری\r\npageViews++;\r\nlocalStorage.setItem('page_views', pageViews);\r\nupdateAnalyticsDisplays();\r\n\r\n// ردیابی زمان صفحه و نشست\r\nlet screenTimeInterval;\r\nlet sessionTimeInterval;\r\n\r\nfunction startTrackingTime() {\r\n    screenTimeInterval = setInterval(() => {\r\n        screenTime++;\r\n        localStorage.setItem('screen_time', screenTime);\r\n        updateAnalyticsDisplays();\r\n    }, 1000);\r\n\r\n    sessionTimeInterval = setInterval(() => {\r\n        sessionTime++;\r\n        localStorage.setItem('session_time', sessionTime);\r\n        updateAnalyticsDisplays();\r\n    }, 1000);\r\n}\r\n\r\nfunction stopTrackingTime() {\r\n    clearInterval(screenTimeInterval);\r\n    clearInterval(sessionTimeInterval);\r\n}\r\n\r\n// ردیابی کلیک\r\ndocument.addEventListener('click', () => {\r\n    clickCount++;\r\n    localStorage.setItem('click_count', clickCount);\r\n    updateAnalyticsDisplays();\r\n});\r\n\r\n// ردیابی اسکرول\r\nconst scrollableContent = document.querySelector('.scrollable-content');\r\nif (scrollableContent) {\r\n    scrollableContent.addEventListener('scroll', () => {\r\n        const scrollTop = scrollableContent.scrollTop;\r\n        const scrollHeight = scrollableContent.scrollHeight;\r\n        const clientHeight = scrollableContent.clientHeight;\r\n\r\n        if (scrollHeight > clientHeight) { // اطمینان از اینکه محتوا واقعاً قابل اسکرول است\r\n            const currentScrollDepth = Math.floor((scrollTop / (scrollHeight - clientHeight)) * 100);\r\n            if (currentScrollDepth > maxScrollDepth) {\r\n                maxScrollDepth = currentScrollDepth;\r\n                updateAnalyticsDisplays();\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// ردیابی فوکس روی input ها\r\nconst sampleInput = document.getElementById('sampleInput');\r\nif (sampleInput) {\r\n    sampleInput.addEventListener('focus', () => {\r\n        console.log('Input Focused');\r\n        sendAnalyticsData('[INT]_input_focus', { elementId: 'sampleInput' });\r\n    });\r\n    sampleInput.addEventListener('blur', () => {\r\n        console.log('Input Blurred');\r\n        sendAnalyticsData('[INT]_input_blur', { elementId: 'sampleInput' });\r\n    });\r\n}\r\n\r\n\r\n// ردیابی کپی متن\r\ndocument.addEventListener('copy', (event) => {\r\n    const copiedText = event.clipboardData.getData('text/plain');\r\n    console.log('Text Copied:', copiedText.substring(0, Math.min(copiedText.length, 50)) + (copiedText.length > 50 ? '...' : ''));\r\n    sendAnalyticsData('[INT]_text_copied', { text_length: copiedText.length });\r\n});\r\n\r\n// ردیابی تغییر سایز پنجره\r\nlet resizeTimeout;\r\nwindow.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimeout);\r\n    resizeTimeout = setTimeout(() => {\r\n        console.log('Window Resized:', window.innerWidth, 'x', window.innerHeight);\r\n        sendAnalyticsData('[INT]_window_resized', {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        });\r\n    }, 500); // Debounce برای جلوگیری از ارسال رویدادهای زیاد\r\n});\r\n\r\n// ردیابی خطاهای JS\r\nwindow.onerror = (message, source, lineno, colno, error) => {\r\n    jsErrorCount++;\r\n    localStorage.setItem('js_error_count', jsErrorCount);\r\n    updateAnalyticsDisplays();\r\n    console.error('JS Error Captured:', message, source, lineno, colno, error);\r\n    sendAnalyticsData('[INT]_js_error', {\r\n        message: message,\r\n        source: source,\r\n        lineno: lineno,\r\n        colno: colno,\r\n        error_stack: error ? error.stack : 'N/A'\r\n    });\r\n    return false; // اجازه می‌دهد خطا به کنسول مرورگر نیز برسد\r\n};\r\n\r\n// ردیابی افزودن/حذف از سبد خرید\r\ndocument.querySelectorAll('.addToCartBtn').forEach(button => {\r\n    button.addEventListener('click', (event) => {\r\n        const productId = event.target.dataset.productId;\r\n        console.log(`Product ${productId} added to cart.`);\r\n        sendAnalyticsData('[INT]_add_to_cart', { product_id: productId });\r\n    });\r\n});\r\n\r\ndocument.querySelectorAll('.removeFromCartBtn').forEach(button => {\r\n    button.addEventListener('click', (event) => {\r\n        const productId = event.target.dataset.productId;\r\n        console.log(`Product ${productId} removed from cart.`);\r\n        sendAnalyticsData('[INT]_remove_from_cart', { product_id: productId });\r\n    });\r\n});\r\n\r\n// ردیابی جستجوی داخلی\r\nconst internalSearchInput = document.getElementById('internalSearchInput');\r\nconst searchBtn = document.getElementById('searchBtn');\r\nif (searchBtn && internalSearchInput) {\r\n    searchBtn.addEventListener('click', () => {\r\n        const query = internalSearchInput.value;\r\n        if (query) {\r\n            console.log('Internal Search:', query);\r\n            sendAnalyticsData('[INT]_internal_search', { search_query: query });\r\n        }\r\n    });\r\n}\r\n\r\n\r\n// دریافت اطلاعات دستگاه\r\nfunction getDeviceInfo() {\r\n    const userAgent = navigator.userAgent;\r\n    let deviceType = 'Desktop';\r\n    if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(userAgent)) {\r\n        deviceType = 'Tablet';\r\n    } else if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Source|Jasmine|Blazer|Opera Mini|CriOS|Firefox|FxiOS/i.test(userAgent)) {\r\n        deviceType = 'Mobile';\r\n    }\r\n\r\n    let os = 'Unknown OS';\r\n    if (userAgent.indexOf(\"Win\") != -1) os = \"Windows\";\r\n    if (userAgent.indexOf(\"Mac\") != -1) os = \"macOS\";\r\n    if (userAgent.indexOf(\"Linux\") != -1) os = \"Linux\";\r\n    if (userAgent.indexOf(\"Android\") != -1) os = \"Android\";\r\n    if (userAgent.indexOf(\"iOS\") != -1 || /(iPhone|iPad|iPod)/i.test(userAgent)) os = \"iOS\";\r\n\r\n    let browser = 'Unknown Browser';\r\n    if (userAgent.indexOf(\"Chrome\") != -1 && !userAgent.includes(\"Edg\") && !userAgent.includes(\"OPR\")) browser = \"Chrome\";\r\n    else if (userAgent.indexOf(\"Firefox\") != -1) browser = \"Firefox\";\r\n    else if (userAgent.indexOf(\"Safari\") != -1 && !userAgent.includes(\"Chrome\")) browser = \"Safari\";\r\n    else if (userAgent.indexOf(\"Edg\") != -1) browser = \"Edge\";\r\n    else if (userAgent.indexOf(\"Opera\") != -1 || userAgent.indexOf(\"OPR\") != -1) browser = \"Opera\";\r\n    else if (userAgent.indexOf(\"MSIE\") != -1 || userAgent.indexOf(\"Trident\") != -1) browser = \"IE\";\r\n\r\n    return {\r\n        deviceType: deviceType,\r\n        os: os,\r\n        browser: browser,\r\n        resolution: `${window.screen.width}x${window.screen.height}`\r\n    };\r\n}\r\n\r\n// نمایش اطلاعات دستگاه\r\nconst deviceInfo = getDeviceInfo();\r\nconst deviceTypeDisplay = document.getElementById('deviceTypeDisplay');\r\nconst osDisplay = document.getElementById('osDisplay');\r\nconst browserDisplay = document.getElementById('browserDisplay');\r\nconst resolutionDisplay = document.getElementById('resolutionDisplay');\r\n\r\nif (deviceTypeDisplay) deviceTypeDisplay.textContent = deviceInfo.deviceType;\r\nif (osDisplay) osDisplay.textContent = deviceInfo.os;\r\nif (browserDisplay) browserDisplay.textContent = deviceInfo.browser;\r\nif (resolutionDisplay) resolutionDisplay.textContent = deviceInfo.resolution;\r\n\r\n\r\n// ردیابی زمان لود صفحه\r\nwindow.addEventListener('load', () => {\r\n    const performanceTiming = window.performance.timing;\r\n    const pageLoadTime = performanceTiming.loadEventEnd - performanceTiming.navigationStart;\r\n    const pageLoadTimeDisplay = document.getElementById('pageLoadTimeDisplay');\r\n    if (pageLoadTimeDisplay) {\r\n        pageLoadTimeDisplay.textContent = `${pageLoadTime}ms`;\r\n    }\r\n    sendAnalyticsData('[INT]_page_load_time', { load_time_ms: pageLoadTime });\r\n});\r\n\r\n\r\n// ارسال داده‌های تحلیلی به سرور\r\nasync function sendAnalyticsData(eventName = '[INT]_update_session', customEventData = {}) {\r\n    const data = {\r\n        guest_uuid: guestUuid,\r\n        eventName: eventName,\r\n        eventData: {\r\n            session_duration: sessionTime,\r\n            ...customEventData // اضافه کردن داده‌های رویداد سفارشی\r\n        },\r\n        screenData: {\r\n            _int_href: window.location.href,\r\n            _int_pathname: window.location.pathname,\r\n            _int_hash: window.location.hash,\r\n            _int_search: window.location.search,\r\n        },\r\n        currentUrl: window.location.href,\r\n        pageTitle: document.title,\r\n        trafficSource: trafficSource,\r\n        screenViews: pageViews,\r\n        screenTime: screenTime,\r\n        sessionTime: sessionTime,\r\n        scrollDepth: maxScrollDepth, // اضافه کردن درصد اسکرول\r\n        deviceInfo: getDeviceInfo(), // اضافه کردن اطلاعات دستگاه\r\n        performanceMetrics: { // اضافه کردن معیارهای عملکرد\r\n            page_load_time_ms: window.performance.timing.loadEventEnd - window.performance.timing.navigationStart,\r\n        },\r\n        interactionDetails: { // اضافه کردن جزئیات تعاملات کلی\r\n            click_count: clickCount,\r\n            js_error_count: jsErrorCount,\r\n            // می‌توانید جزئیات فوکس، کپی و تغییر سایز را نیز اینجا اضافه کنید\r\n            // یا آن‌ها را به عنوان رویدادهای جداگانه (مانند بالا) ارسال کنید.\r\n        },\r\n        // searchQuery به صورت پویا هنگام رویداد جستجو اضافه می‌شود\r\n    };\r\n\r\n    // اگر رویداد جستجو است، searchQuery را اضافه کن\r\n    if (eventName === '[INT]_internal_search' && customEventData.search_query) {\r\n        data.searchQuery = customEventData.search_query;\r\n    }\r\n\r\n\r\n    try {\r\n        const response = await fetch('/api/analytics/track', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content') // برای لاراول\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n\r\n        const result = await response.json();\r\n        if (!response.ok) {\r\n            throw new Error(result.message || 'خطا در ارسال داده‌های تحلیلی');\r\n        }\r\n        console.log('Analytics data sent:', result.message);\r\n    } catch (error) {\r\n        console.error('Error sending analytics data:', error);\r\n    }\r\n}\r\n\r\n// شروع ردیابی زمان هنگام بارگذاری صفحه\r\nwindow.onload = startTrackingTime;\r\n\r\n// ارسال داده‌های تحلیلی هنگام ترک صفحه (قبل از بسته شدن یا رفرش)\r\nwindow.addEventListener('beforeunload', () => {\r\n    stopTrackingTime();\r\n    // توجه: sendBeacon برای ارسال داده‌های کوچک هنگام ترک صفحه بهتر است\r\n    // اما برای این مثال از fetch استفاده می‌کنیم\r\n    sendAnalyticsData('[INT]_session_end'); // ارسال یک رویداد نهایی پایان نشست\r\n});\r\n\r\n// ارسال داده‌های تحلیلی هر 30 ثانیه (برای اطمینان از ارسال داده‌های جدید)\r\nsetInterval(sendAnalyticsData, 30000); // 30 ثانیه\r\n\r\n// --- مدیریت احراز هویت (JWT) ---\r\n// این بخش از کد برای مثال UI است و باید با سیستم احراز هویت موجود شما ادغام شود.\r\n// در پروژه واقعی، این منطق در فایل‌های auth-modules.js یا مشابه آن قرار می‌گیرد.\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const loginBtn = document.getElementById('loginBtn');\r\n    const logoutBtn = document.getElementById('logoutBtn');\r\n    const getUserBtn = document.getElementById('getUserBtn');\r\n    const generateErrorBtn = document.getElementById('generateErrorBtn');\r\n\r\n    if (loginBtn) {\r\n        loginBtn.addEventListener('click', async () => {\r\n            const email = document.getElementById('email').value;\r\n            const password = document.getElementById('password').value;\r\n\r\n            try {\r\n                const response = await fetch('/api/auth/login', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Accept': 'application/json',\r\n                        'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\r\n                    },\r\n                    body: JSON.stringify({ email, password })\r\n                });\r\n\r\n                const result = await response.json();\r\n                if (response.ok) {\r\n                    showMessage(result.message, 'success');\r\n                } else {\r\n                    showMessage(result.message, 'error');\r\n                }\r\n            } catch (error) {\r\n                showMessage('خطا در ورود: ' + error.message, 'error');\r\n            }\r\n        });\r\n    }\r\n\r\n    if (logoutBtn) {\r\n        logoutBtn.addEventListener('click', async () => {\r\n            try {\r\n                const response = await fetch('/api/auth/logout', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Accept': 'application/json',\r\n                        'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\r\n                    }\r\n                });\r\n\r\n                const result = await response.json();\r\n                if (response.ok) {\r\n                    showMessage(result.message, 'success');\r\n                    const userInfoDiv = document.getElementById('userInfo');\r\n                    const userDataPre = document.getElementById('userData');\r\n                    if (userInfoDiv) userInfoDiv.classList.add('hidden');\r\n                    if (userDataPre) userDataPre.textContent = '';\r\n                } else {\r\n                    showMessage(result.message, 'error');\r\n                }\r\n            } catch (error) {\r\n                showMessage('خطا در خروج: ' + error.message, 'error');\r\n            }\r\n        });\r\n    }\r\n\r\n    if (getUserBtn) {\r\n        getUserBtn.addEventListener('click', async () => {\r\n            try {\r\n                const response = await fetch('/api/user', {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\r\n                    }\r\n                });\r\n\r\n                const result = await response.json();\r\n                const userInfoDiv = document.getElementById('userInfo');\r\n                const userDataPre = document.getElementById('userData');\r\n\r\n                if (response.ok) {\r\n                    if (userDataPre) userDataPre.textContent = JSON.stringify(result, null, 2);\r\n                    if (userInfoDiv) userInfoDiv.classList.remove('hidden');\r\n                    showMessage('اطلاعات کاربر با موفقیت دریافت شد.', 'success');\r\n                } else {\r\n                    showMessage(result.message || 'خطا در دریافت اطلاعات کاربر', 'error');\r\n                    if (userInfoDiv) userInfoDiv.classList.add('hidden');\r\n                }\r\n            } catch (error) {\r\n                showMessage('خطا در دریافت اطلاعات کاربر: ' + error.message, 'error');\r\n            }\r\n        });\r\n    }\r\n\r\n    // برای تولید خطای JS برای تست ردیابی خطا\r\n    if (generateErrorBtn) {\r\n        generateErrorBtn.addEventListener('click', () => {\r\n            // این خط یک خطای عمدی ایجاد می کند\r\n            console.log(undefinedVariable.property);\r\n        });\r\n    }\r\n});\r\n"],"names":["generateUUID","c","r","v","showMessage","msg","type","messageDiv","guestUuid","guestUuidDisplay","pageViews","screenTime","sessionTime","clickCount","jsErrorCount","trafficSource","maxScrollDepth","updateAnalyticsDisplays","displays","id","element","screenTimeInterval","sessionTimeInterval","startTrackingTime","stopTrackingTime","scrollableContent","scrollTop","scrollHeight","clientHeight","currentScrollDepth","sampleInput","sendAnalyticsData","event","copiedText","resizeTimeout","message","source","lineno","colno","error","button","productId","internalSearchInput","searchBtn","query","getDeviceInfo","userAgent","deviceType","os","browser","deviceInfo","deviceTypeDisplay","osDisplay","browserDisplay","resolutionDisplay","performanceTiming","pageLoadTime","pageLoadTimeDisplay","eventName","customEventData","data","response","result","loginBtn","logoutBtn","getUserBtn","generateErrorBtn","email","password","userInfoDiv","userDataPre"],"mappings":"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"}